<!DOCTYPE html>
<html lang="en-us">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="Source Themes Academic 3.2.0">
  <meta name="generator" content="Hugo 0.52" />
  <meta name="author" content="Paul Efren Santos Andrade">

  
  
  
  
    
  
  <meta name="description" content="La base de datosContinuamos trabajando con el data.frame msleep, siempre con la intención de permitir la reproductibilidad del código.
glimpse(msleep)## Observations: 83## Variables: 11## $ name &lt;chr&gt; &quot;Cheetah&quot;, &quot;Owl monkey&quot;, &quot;Mountain beaver&quot;, &quot;Grea...## $ genus &lt;chr&gt; &quot;Acinonyx&quot;, &quot;Aotus&quot;, &quot;Aplodontia&quot;, &quot;Blarina&quot;, &quot;Bo...## $ vore &lt;chr&gt; &quot;carni&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;herbi...## $ order &lt;chr&gt; &quot;Carnivora&quot;, &quot;Primates&quot;, &quot;Rodentia&quot;, &quot;Soricomorph...## $ conservation &lt;chr&gt; &quot;lc&quot;, NA, &quot;nt&quot;, &quot;lc&quot;, &quot;domesticated&quot;, NA, &quot;vu&quot;, N.">

  
  <link rel="alternate" hreflang="en-us" href="/post/2018-11-26-data_wrangling_4/">

  


  

  

  

  

  

  

  
  
  
  <meta name="theme-color" content="#328cc1">
  

  
  
  
  
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha256-eSi1q2PG6J7g7ib17yAaWMcrr5GrtohYChqibrV7PBE=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/academicons/1.8.6/css/academicons.min.css" integrity="sha256-uFVgMKfistnJAfoCUQigIl+JfUaP47GrRKjf6CTPVmw=" crossorigin="anonymous">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.1/css/all.css" integrity="sha384-5sAR7xN1Nv6T6+dT2mhtzEpVJvfS3NScPQTrOxhwjIuvcA67KV2R5Jz6kr4abQsz" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.css" integrity="sha256-ygkqlh3CYSUri3LhQxzdcm0n1EQvH2Y+U5S2idbLtxs=" crossorigin="anonymous">

    
    
    
      
    
    
      
      
        
          <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css" crossorigin="anonymous">
        
      
    

    

    

  

  
  
  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Montserrat:400,700|Roboto:400,400italic,700|Roboto+Mono">
  

  <link rel="stylesheet" href="/styles.css">
  

  
  
  

  
  <link rel="alternate" href="/index.xml" type="application/rss+xml" title="DataScience &amp; Biology">
  <link rel="feed" href="/index.xml" type="application/rss+xml" title="DataScience &amp; Biology">
  

  <link rel="manifest" href="/site.webmanifest">
  <link rel="icon" type="image/png" href="/img/icon.png">
  <link rel="apple-touch-icon" type="image/png" href="/img/icon-192.png">

  <link rel="canonical" href="/post/2018-11-26-data_wrangling_4/">

  
  
  
  
    
    
  
  <meta property="twitter:card" content="summary">
  
  <meta property="twitter:site" content="@@PaulEfrenSantos">
  <meta property="twitter:creator" content="@@PaulEfrenSantos">
  
  <meta property="og:site_name" content="DataScience &amp; Biology">
  <meta property="og:url" content="/post/2018-11-26-data_wrangling_4/">
  <meta property="og:title" content="Data Wrangling Part 4 | DataScience &amp; Biology">
  <meta property="og:description" content="La base de datosContinuamos trabajando con el data.frame msleep, siempre con la intención de permitir la reproductibilidad del código.
glimpse(msleep)## Observations: 83## Variables: 11## $ name &lt;chr&gt; &quot;Cheetah&quot;, &quot;Owl monkey&quot;, &quot;Mountain beaver&quot;, &quot;Grea...## $ genus &lt;chr&gt; &quot;Acinonyx&quot;, &quot;Aotus&quot;, &quot;Aplodontia&quot;, &quot;Blarina&quot;, &quot;Bo...## $ vore &lt;chr&gt; &quot;carni&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;herbi...## $ order &lt;chr&gt; &quot;Carnivora&quot;, &quot;Primates&quot;, &quot;Rodentia&quot;, &quot;Soricomorph...## $ conservation &lt;chr&gt; &quot;lc&quot;, NA, &quot;nt&quot;, &quot;lc&quot;, &quot;domesticated&quot;, NA, &quot;vu&quot;, N."><meta property="og:image" content="/img/paul_efren.JPG">
  <meta property="og:locale" content="en-us">
  
  <meta property="article:published_time" content="2018-11-26T00:00:00&#43;00:00">
  
  <meta property="article:modified_time" content="2018-11-26T00:00:00&#43;00:00">
  

  

  

  <title>Data Wrangling Part 4 | DataScience &amp; Biology</title>

</head>
<body id="top" data-spy="scroll" data-target="#TableOfContents" data-offset="71" >
  <aside class="search-results" id="search">
  <div class="container">
    <section class="search-header">

      <div class="row no-gutters justify-content-between mb-3">
        <div class="col-6">
          <h1>Search</h1>
        </div>
        <div class="col-6 col-search-close">
          <a class="js-search" href="#"><i class="fas fa-times-circle text-muted" aria-hidden="true"></i></a>
        </div>
      </div>

      <div id="search-box">
        
        <input name="q" id="search-query" placeholder="Search..." autocapitalize="off"
        autocomplete="off" autocorrect="off" role="textbox" spellcheck="false" type="search">
        
      </div>

    </section>
    <section class="section-search-results">

      <div id="search-hits">
        
      </div>

    </section>
  </div>
</aside>


<nav class="navbar navbar-light fixed-top navbar-expand-lg py-0" id="navbar-main">
  <div class="container">

    
      <a class="navbar-brand" href="/">DataScience &amp; Biology</a>
      
      <button type="button" class="navbar-toggler" data-toggle="collapse"
              data-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span><i class="fas fa-bars"></i></span>
      </button>
      

    
    <div class="collapse navbar-collapse" id="navbar">

      
      
      <ul class="navbar-nav ml-auto">
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#about">
            
            <span>Home</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#publications_selected">
            
            <span>Publications</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#posts">
            
            <span>Posts</span>
            
          </a>
        </li>

        
        

        

        
        
        

        <li class="nav-item">
          <a class="nav-link" href="/#cv">
            
            <span>CV</span>
            
          </a>
        </li>

        
        

        

        
        
        
          
        

        <li class="nav-item">
          <a class="nav-link" href="/#contact">
            
            <span>Contact</span>
            
          </a>
        </li>

        
        

      

        

        
        <li class="nav-item">
          <a class="nav-link js-search" href="#"><i class="fas fa-search" aria-hidden="true"></i></a>
        </li>
        

        

        
        <li class="nav-item">
          <a class="nav-link js-dark-toggle" href="#"><i class="fas fa-moon" aria-hidden="true"></i></a>
        </li>
        

      </ul>

    </div>
  </div>
</nav>


<article class="article" itemscope itemtype="http://schema.org/Article">

  












  

  
  
  
<div class="article-container pt-3">
  <h1 itemprop="name">Data Wrangling Part 4</h1>

  
  <p class="page-subtitle">Agrupamiento y tablas resumen</p>
  

  
    

<div class="article-metadata">

  
  
  <span itemscope itemprop="author" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Paul Efren Santos Andrade">
  </span>
  

  <span class="article-date">
    
    <meta content="2018-11-26 00:00:00 &#43;0000 UTC" itemprop="datePublished">
    <time datetime="2018-11-26 00:00:00 &#43;0000 UTC" itemprop="dateModified">
      Nov 26, 2018
    </time>
  </span>
  <span itemscope itemprop="publisher" itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Paul Efren Santos Andrade">
  </span>

  
  <span class="middot-divider"></span>
  <span class="article-reading-time">
    11 min read
  </span>
  

  
  
  <span class="middot-divider"></span>
  <a href="/post/2018-11-26-data_wrangling_4/#disqus_thread"></a>
  

  
  
  
  <span class="middot-divider"></span>
  <span class="article-categories">
    <i class="fas fa-folder"></i>
    
    <a href="/categories/r/">R</a>
    
  </span>
  
  

  
  
<div class="share-box" aria-hidden="true">
  <ul class="share">
    <li>
      <a class="twitter"
         href="https://twitter.com/intent/tweet?text=Data%20Wrangling%20Part%204&amp;url=%2fpost%2f2018-11-26-data_wrangling_4%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-twitter"></i>
      </a>
    </li>
    <li>
      <a class="facebook"
         href="https://www.facebook.com/sharer.php?u=%2fpost%2f2018-11-26-data_wrangling_4%2f"
         target="_blank" rel="noopener">
        <i class="fab fa-facebook-f"></i>
      </a>
    </li>
    <li>
      <a class="linkedin"
         href="https://www.linkedin.com/shareArticle?mini=true&amp;url=%2fpost%2f2018-11-26-data_wrangling_4%2f&amp;title=Data%20Wrangling%20Part%204"
         target="_blank" rel="noopener">
        <i class="fab fa-linkedin-in"></i>
      </a>
    </li>
    <li>
      <a class="weibo"
         href="http://service.weibo.com/share/share.php?url=%2fpost%2f2018-11-26-data_wrangling_4%2f&amp;title=Data%20Wrangling%20Part%204"
         target="_blank" rel="noopener">
        <i class="fab fa-weibo"></i>
      </a>
    </li>
    <li>
      <a class="email"
         href="mailto:?subject=Data%20Wrangling%20Part%204&amp;body=%2fpost%2f2018-11-26-data_wrangling_4%2f">
        <i class="fas fa-envelope"></i>
      </a>
    </li>
  </ul>
</div>


  

</div>

    















  
</div>



  <div class="article-container">

    <div class="article-style" itemprop="articleBody">
      


<div id="la-base-de-datos" class="section level2">
<h2>La base de datos</h2>
<p>Continuamos trabajando con el data.frame <strong>msleep</strong>, siempre con la intención de permitir la reproductibilidad del código.</p>
<pre class="r"><code>glimpse(msleep)</code></pre>
<pre><code>## Observations: 83
## Variables: 11
## $ name         &lt;chr&gt; &quot;Cheetah&quot;, &quot;Owl monkey&quot;, &quot;Mountain beaver&quot;, &quot;Grea...
## $ genus        &lt;chr&gt; &quot;Acinonyx&quot;, &quot;Aotus&quot;, &quot;Aplodontia&quot;, &quot;Blarina&quot;, &quot;Bo...
## $ vore         &lt;chr&gt; &quot;carni&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;omni&quot;, &quot;herbi&quot;, &quot;herbi...
## $ order        &lt;chr&gt; &quot;Carnivora&quot;, &quot;Primates&quot;, &quot;Rodentia&quot;, &quot;Soricomorph...
## $ conservation &lt;chr&gt; &quot;lc&quot;, NA, &quot;nt&quot;, &quot;lc&quot;, &quot;domesticated&quot;, NA, &quot;vu&quot;, N...
## $ sleep_total  &lt;dbl&gt; 12.1, 17.0, 14.4, 14.9, 4.0, 14.4, 8.7, 7.0, 10.1...
## $ sleep_rem    &lt;dbl&gt; NA, 1.8, 2.4, 2.3, 0.7, 2.2, 1.4, NA, 2.9, NA, 0....
## $ sleep_cycle  &lt;dbl&gt; NA, NA, NA, 0.1333333, 0.6666667, 0.7666667, 0.38...
## $ awake        &lt;dbl&gt; 11.9, 7.0, 9.6, 9.1, 20.0, 9.6, 15.3, 17.0, 13.9,...
## $ brainwt      &lt;dbl&gt; NA, 0.01550, NA, 0.00029, 0.42300, NA, NA, NA, 0....
## $ bodywt       &lt;dbl&gt; 50.000, 0.480, 1.350, 0.019, 600.000, 3.850, 20.4...</code></pre>
</div>
<div id="recuento-de-eventos" class="section level2">
<h2>Recuento de eventos:</h2>
<ul>
<li><strong>Número de observaciónes</strong>:</li>
</ul>
<p>Determinar el número de observaciones para cada uno de los niveles de una variable específica, es una tarea que puede ser completada fácilmente con la función <code>count()</code>.
Uno de los argumentos útiles de esta función es: <code>sort = TRUE</code>, el cual nos permite ordenar los resultados en forma decreciente:</p>
<pre class="r"><code>msleep %&gt;% 
  count(order, sort = TRUE)</code></pre>
<pre class="r"><code>msleep %&gt;% 
  count(order, sort = TRUE) %&gt;% 
  head(n = 10) %&gt;% 
  kable()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">order</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Rodentia</td>
<td align="right">22</td>
</tr>
<tr class="even">
<td align="left">Carnivora</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Primates</td>
<td align="right">12</td>
</tr>
<tr class="even">
<td align="left">Artiodactyla</td>
<td align="right">6</td>
</tr>
<tr class="odd">
<td align="left">Soricomorpha</td>
<td align="right">5</td>
</tr>
<tr class="even">
<td align="left">Cetacea</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Hyracoidea</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Perissodactyla</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Chiroptera</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Cingulata</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<p>La función <strong>count()</strong> puede actuar sobre múltiples variables, el siguiente ejemplo cuenta el número de observaciones para cada uno de los niveles de las variables <strong>order</strong> y <strong>vore</strong>:</p>
<pre class="r"><code>msleep %&gt;% 
  count(order, vore, sort = TRUE)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">order</th>
<th align="left">vore</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Rodentia</td>
<td align="left">herbi</td>
<td align="right">16</td>
</tr>
<tr class="even">
<td align="left">Carnivora</td>
<td align="left">carni</td>
<td align="right">12</td>
</tr>
<tr class="odd">
<td align="left">Primates</td>
<td align="left">omni</td>
<td align="right">10</td>
</tr>
<tr class="even">
<td align="left">Artiodactyla</td>
<td align="left">herbi</td>
<td align="right">5</td>
</tr>
<tr class="odd">
<td align="left">Cetacea</td>
<td align="left">carni</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Perissodactyla</td>
<td align="left">herbi</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Rodentia</td>
<td align="left">NA</td>
<td align="right">3</td>
</tr>
<tr class="even">
<td align="left">Soricomorpha</td>
<td align="left">omni</td>
<td align="right">3</td>
</tr>
<tr class="odd">
<td align="left">Chiroptera</td>
<td align="left">insecti</td>
<td align="right">2</td>
</tr>
<tr class="even">
<td align="left">Hyracoidea</td>
<td align="left">herbi</td>
<td align="right">2</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Adjuntando el número de observaciones en una nueva columna:</strong></li>
</ul>
<p>Si el interés es solo conocer el número total de observaciones en el data.frame, la función <strong>tally()</strong> puede ayudar con esta tarea. Esta función es homologa con <strong>nrow()</strong>.Esta función no puede ser utilizada sobre variables específicas.</p>
<pre class="r"><code>msleep %&gt;% 
  tally()
---
msleep %&gt;% 
  nrow()</code></pre>
<ul>
<li>tally()</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">83</td>
</tr>
</tbody>
</table>
<ul>
<li>nrow()</li>
</ul>
<table>
<thead>
<tr class="header">
<th align="right">x</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">83</td>
</tr>
</tbody>
</table>
<p>La función <strong>add_tally()</strong> crea una nueva columna con el número total de observaciones, semejante a <strong>mutate(n = n())</strong>.</p>
<pre class="r"><code>msleep %&gt;% 
  select(1:3) %&gt;% 
  add_tally()</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">genus</th>
<th align="left">vore</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Cheetah</td>
<td align="left">Acinonyx</td>
<td align="left">carni</td>
<td align="right">83</td>
</tr>
<tr class="even">
<td align="left">Owl monkey</td>
<td align="left">Aotus</td>
<td align="left">omni</td>
<td align="right">83</td>
</tr>
<tr class="odd">
<td align="left">Mountain beaver</td>
<td align="left">Aplodontia</td>
<td align="left">herbi</td>
<td align="right">83</td>
</tr>
<tr class="even">
<td align="left">Greater short-tailed shrew</td>
<td align="left">Blarina</td>
<td align="left">omni</td>
<td align="right">83</td>
</tr>
<tr class="odd">
<td align="left">Cow</td>
<td align="left">Bos</td>
<td align="left">herbi</td>
<td align="right">83</td>
</tr>
<tr class="even">
<td align="left">Three-toed sloth</td>
<td align="left">Bradypus</td>
<td align="left">herbi</td>
<td align="right">83</td>
</tr>
</tbody>
</table>
<p>La función <strong>add_count()</strong> toma como argumento una variable y crea una nueva columna con el número de observaciones para cada uno de sus niveles:</p>
<pre class="r"><code>msleep %&gt;% 
  select(name:vore) %&gt;% 
  add_count(vore)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">genus</th>
<th align="left">vore</th>
<th align="right">n</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Cheetah</td>
<td align="left">Acinonyx</td>
<td align="left">carni</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="left">Owl monkey</td>
<td align="left">Aotus</td>
<td align="left">omni</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="left">Mountain beaver</td>
<td align="left">Aplodontia</td>
<td align="left">herbi</td>
<td align="right">32</td>
</tr>
<tr class="even">
<td align="left">Greater short-tailed shrew</td>
<td align="left">Blarina</td>
<td align="left">omni</td>
<td align="right">20</td>
</tr>
<tr class="odd">
<td align="left">Cow</td>
<td align="left">Bos</td>
<td align="left">herbi</td>
<td align="right">32</td>
</tr>
<tr class="even">
<td align="left">Three-toed sloth</td>
<td align="left">Bradypus</td>
<td align="left">herbi</td>
<td align="right">32</td>
</tr>
<tr class="odd">
<td align="left">Northern fur seal</td>
<td align="left">Callorhinus</td>
<td align="left">carni</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="left">Vesper mouse</td>
<td align="left">Calomys</td>
<td align="left">NA</td>
<td align="right">7</td>
</tr>
<tr class="odd">
<td align="left">Dog</td>
<td align="left">Canis</td>
<td align="left">carni</td>
<td align="right">19</td>
</tr>
<tr class="even">
<td align="left">Roe deer</td>
<td align="left">Capreolus</td>
<td align="left">herbi</td>
<td align="right">32</td>
</tr>
</tbody>
</table>
</div>
<div id="summarise---summarize" class="section level2">
<h2>summarise() - summarize()</h2>
<ul>
<li><p><strong>Construyendo tablas de resumen</strong></p></li>
<li><p>Nota: Algunas de las funciones en <strong>dplyr()</strong> son nombradas tanto en <strong>Ingles Americano</strong> como <strong>Ingles Británico</strong>. Así la función <strong>summarise()</strong> es equivalente a <strong>summarize()</strong>.</p></li>
</ul>
<p>Como ya observamos líneas antes; si el interés es conocer el número de observaciones, la función <code>count()</code> puede cumplir esa tarea. Pero si buscamos conocer el promedio, la suma, el mínimo, el máximo y el número de observaciones necesitaremos apoyarnos en otra función. La función <em>summarize()</em> permitirá alcanzar este objetivo. Esta función necesita como argumentos:</p>
<ol style="list-style-type: decimal">
<li>El nombre de la nueva columna.</li>
<li>El operador de asignación igual <code>(&quot;=&quot;)</code>.</li>
<li>La función que se desea aplicar sobre la variable.</li>
</ol>
<p><strong>data_frame %&gt;%
summarise(nombre_columna = función(variable))</strong></p>
<p>Es posible utilizar múltiples funciones, una seguida de otra:</p>
<pre class="r"><code>msleep %&gt;% 
  summarise(n = n(),
            promedio = mean(sleep_total),
            maximo = max(sleep_total))</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">n</th>
<th align="right">promedio</th>
<th align="right">maximo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">83</td>
<td align="right">10.43373</td>
<td align="right">19.9</td>
</tr>
</tbody>
</table>
</div>
<div id="group_by" class="section level2">
<h2>group_by()</h2>
<p>En muchas oportunidades es necesario realizar un cambio en nuestra unidad de análisis, a fin de conocer los valores totales para cada uno de los niveles de una <strong>variable categórica</strong>. Para cumplir con esta tarea es necesario complementar el poder de la función <strong>summarize()</strong> con la función <strong>group_by()</strong>, esta permite modificar la unidad de análisis.</p>
<p>Es posible utilizar más de una variable como argumento de la función <strong>group_by()</strong>.</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise(n = n(),
            average = mean(sleep_total), 
            maximum = max(sleep_total))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">n</th>
<th align="right">average</th>
<th align="right">maximum</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">19</td>
<td align="right">10.378947</td>
<td align="right">19.4</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">32</td>
<td align="right">9.509375</td>
<td align="right">16.6</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">5</td>
<td align="right">14.940000</td>
<td align="right">19.9</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">20</td>
<td align="right">10.925000</td>
<td align="right">18.0</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">7</td>
<td align="right">10.185714</td>
<td align="right">13.7</td>
</tr>
</tbody>
</table>
<p><strong>summarise()</strong> puede utilizar como argumento cualquier función que resuma en un valor una característica de un grupo de observaciones:</p>
<ul>
<li><p><code>n()</code> - determina el número de observaciones para cada uno de los niveles de una variable, <strong>No es necesario especificar un argumento</strong>.</p></li>
<li><p><code>n_distinct(variable)</code> - determina el número de observaciones o niveles únicos de una <strong>variable</strong>.</p></li>
<li><p><code>sum(variable)</code> suma, <code>max(variable)</code> máximo, <code>min(variable)</code> mínimo , …</p></li>
<li><p><code>mean(variable)</code>, <code>median(variable)</code>, <code>sd(variable)</code>, <code>IQR(variable)</code>, …</p></li>
</ul>
<p>El ejemplo siguiente calcula el promedio de la variable <strong>sleep_total</strong> y lo divide por <strong>24</strong>, permitiéndonos determinar la proporción de horas de sueño por día. Esto para cada uno de los niveles de la variable <strong>vore</strong>.</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise(avg_sleep_day = mean(sleep_total)/24)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">avg_sleep_day</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">0.4324561</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">0.3962240</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">0.6225000</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">0.4552083</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">0.4244048</td>
</tr>
</tbody>
</table>
</div>
<div id="variantes-de-la-funcion-summarize" class="section level2">
<h2><strong>Variantes de la función summarize()</strong></h2>
<p>Al igual que las funciónes <strong>filter(), select() y mutate())</strong>; <strong>summarise()</strong> tiene tres variantes que permiten trabajar sobre multiples columnas con un solo comando:</p>
<div id="summarise_all" class="section level3">
<h3>summarise_all()</h3>
<p>Esta requiere como argumento una función conglomerante, la cual actuara sobre los elementos de una columna.</p>
<p>El siguiente ejemplo calcula el promedio de cada una de las columnas, en ocasiones será necesario incluir como argumento <strong>na.rm = TRUE</strong> para ignorar las observaciones con valores <strong>NA</strong>.</p>
<ul>
<li>Sin considerar el argumento <strong>na.rm</strong></li>
</ul>
<pre class="r"><code>msleep %&gt;% 
   select_if( is.numeric) %&gt;%  
   summarise_all(mean) </code></pre>
<table>
<thead>
<tr class="header">
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">10.43373</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">13.56747</td>
<td align="right">NA</td>
<td align="right">166.1363</td>
</tr>
</tbody>
</table>
<ul>
<li>Ignorando los valores <strong>NA</strong></li>
</ul>
<pre class="r"><code>msleep %&gt;% 
   select_if( is.numeric) %&gt;%  
   summarise_all(mean, narm = TRUE) </code></pre>
<table>
<thead>
<tr class="header">
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">10.43373</td>
<td align="right">1.87541</td>
<td align="right">0.4395833</td>
<td align="right">13.56747</td>
<td align="right">0.2815814</td>
<td align="right">166.1363</td>
</tr>
</tbody>
</table>
<p>Utilizando las funciones <strong>group_by()</strong> y <strong>summarize()</strong>. El siguiente ejemplo retorna el promedio de todas las variables para cada uno de los niveles de la variable <strong>vore</strong>.</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise_all(mean, na.rm = TRUE) %&gt;% 
  select(-c(2:5))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">10.378947</td>
<td align="right">2.290000</td>
<td align="right">0.3733333</td>
<td align="right">13.62632</td>
<td align="right">0.0792556</td>
<td align="right">90.75111</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">9.509375</td>
<td align="right">1.366667</td>
<td align="right">0.4180556</td>
<td align="right">14.49062</td>
<td align="right">0.6215975</td>
<td align="right">366.87725</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">14.940000</td>
<td align="right">3.525000</td>
<td align="right">0.1611111</td>
<td align="right">9.06000</td>
<td align="right">0.0215500</td>
<td align="right">12.92160</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">10.925000</td>
<td align="right">1.955556</td>
<td align="right">0.5924242</td>
<td align="right">13.07500</td>
<td align="right">0.1457312</td>
<td align="right">12.71800</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">10.185714</td>
<td align="right">1.880000</td>
<td align="right">0.1833333</td>
<td align="right">13.81429</td>
<td align="right">0.0076260</td>
<td align="right">0.85800</td>
</tr>
</tbody>
</table>
<p>El argumento utilizado como instrucción para generar agrupar (resumir las observaciones) tiene que ser una función. Cuando no se tenga una función predeterminada en el ambiente de R o como parte de un paquete, es posible construir una función anónima.</p>
<p>El siguiente ejemplo incremente en 5 al promedio de cada una de las columnas del data.frame. La función anónima que nos permita cumplir esta tarea puede ser construida de las siguientes formas: <strong>funs(mean(., na.rm = TRUE) + 5)</strong>, o : <strong>~mean(., na.rm = TRUE) + 5</strong>.</p>
<pre class="r"><code>msleep %&gt;%
  group_by(vore) %&gt;% 
  summarise_all(~mean(., na.rm = TRUE) + 5) </code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">15.37895</td>
<td align="right">7.290000</td>
<td align="right">5.373333</td>
<td align="right">18.62632</td>
<td align="right">5.079256</td>
<td align="right">95.75111</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">14.50938</td>
<td align="right">6.366667</td>
<td align="right">5.418056</td>
<td align="right">19.49063</td>
<td align="right">5.621598</td>
<td align="right">371.87725</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">19.94000</td>
<td align="right">8.525000</td>
<td align="right">5.161111</td>
<td align="right">14.06000</td>
<td align="right">5.021550</td>
<td align="right">17.92160</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">15.92500</td>
<td align="right">6.955556</td>
<td align="right">5.592424</td>
<td align="right">18.07500</td>
<td align="right">5.145731</td>
<td align="right">17.71800</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">15.18571</td>
<td align="right">6.880000</td>
<td align="right">5.183333</td>
<td align="right">18.81429</td>
<td align="right">5.007626</td>
<td align="right">5.85800</td>
</tr>
</tbody>
</table>
</div>
<div id="summarise_if" class="section level3">
<h3>summarise_if()</h3>
<p>Esta función necesita dos argumentos:</p>
<ul>
<li><p>Primero necesitamos información referente a las columnas que serán considerada. Esta información es obtenida mediante una función cuyos resultados son valores boléanos (<strong>TRUE, FALSE</strong>). Los funciones más frecuentes: <code>is.numeric</code>, <code>is.integer</code>, <code>is.double</code>, <code>is.logical</code>, <code>is.factor</code>, <code>lubridate::is.POSIXt</code> o <code>lubridate::is.Date</code>.</p></li>
<li><p>Segundo, es necesaria una función conglomerante predeterminada (mean, sum, …) o una función anónima construida con mediante la función <strong>funs()</strong> o el operador <strong>~</strong>.</p></li>
</ul>
<p>El ejemplo retorna el promedio de todas las variables numéricas agrupadas mediante la variable <code>vore</code>:</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise_if(is.numeric, mean, na.rm=TRUE)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">10.378947</td>
<td align="right">2.290000</td>
<td align="right">0.3733333</td>
<td align="right">13.62632</td>
<td align="right">0.0792556</td>
<td align="right">90.75111</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">9.509375</td>
<td align="right">1.366667</td>
<td align="right">0.4180556</td>
<td align="right">14.49062</td>
<td align="right">0.6215975</td>
<td align="right">366.87725</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">14.940000</td>
<td align="right">3.525000</td>
<td align="right">0.1611111</td>
<td align="right">9.06000</td>
<td align="right">0.0215500</td>
<td align="right">12.92160</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">10.925000</td>
<td align="right">1.955556</td>
<td align="right">0.5924242</td>
<td align="right">13.07500</td>
<td align="right">0.1457312</td>
<td align="right">12.71800</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">10.185714</td>
<td align="right">1.880000</td>
<td align="right">0.1833333</td>
<td align="right">13.81429</td>
<td align="right">0.0076260</td>
<td align="right">0.85800</td>
</tr>
</tbody>
</table>
<p>Uno de los puntos débiles de las funciones conglomerantes es que podemos estar expuestos a confusión, al no saber qué información es la que se obtiene como resultado. Afortunadamente la función <code>rename_*()</code> nos permite renombrar el nombre de cada una de las columnas:</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise_if(is.numeric, mean, na.rm=TRUE) %&gt;% 
  rename_if(is.numeric, ~paste0(&quot;promedio_&quot;, .))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">promedio_sleep_total</th>
<th align="right">promedio_sleep_rem</th>
<th align="right">promedio_sleep_cycle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">10.378947</td>
<td align="right">2.290000</td>
<td align="right">0.3733333</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">9.509375</td>
<td align="right">1.366667</td>
<td align="right">0.4180556</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">14.940000</td>
<td align="right">3.525000</td>
<td align="right">0.1611111</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">10.925000</td>
<td align="right">1.955556</td>
<td align="right">0.5924242</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">10.185714</td>
<td align="right">1.880000</td>
<td align="right">0.1833333</td>
</tr>
</tbody>
</table>
</div>
<div id="summarise_at" class="section level3">
<h3>summarise_at()</h3>
<p>Esta variante también requiere de dos argumentos:</p>
<ol style="list-style-type: decimal">
<li><p>El nombre de las columnas que serán consideradas, estas deberán estar incluidos como argumentos de la función <strong>vars()</strong>.</p></li>
<li><p>Adicionalmente, es necesario indicar cual será la función conglomerante que actuara sobre las variables seleccionadas.</p></li>
</ol>
<p>El ejemplo siguiente proporciona como resultado el promedio de los valores de las columnas cuyos nombres contengan la palabra <strong>sleep</strong> y también renombran estas columnas <strong>promedio_variable</strong> para clarificar la información:</p>
<pre class="r"><code>msleep %&gt;%
  group_by(vore) %&gt;% 
  summarise_at(vars(contains(&quot;sleep&quot;)), mean, na.rm=TRUE) %&gt;%
  rename_at(vars(contains(&quot;sleep&quot;)), ~paste0(&quot;promedio_&quot;, .))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">promedio_sleep_total</th>
<th align="right">promedio_sleep_rem</th>
<th align="right">promedio_sleep_cycle</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">10.378947</td>
<td align="right">2.290000</td>
<td align="right">0.3733333</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">9.509375</td>
<td align="right">1.366667</td>
<td align="right">0.4180556</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">14.940000</td>
<td align="right">3.525000</td>
<td align="right">0.1611111</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">10.925000</td>
<td align="right">1.955556</td>
<td align="right">0.5924242</td>
</tr>
<tr class="odd">
<td align="left">NA</td>
<td align="right">10.185714</td>
<td align="right">1.880000</td>
<td align="right">0.1833333</td>
</tr>
</tbody>
</table>
</div>
<div id="ordenamiento-de-filas" class="section level3">
<h3>Ordenamiento de filas</h3>
<p>En muchas oportunidades es útil que nuestras tablas de resumen estén ordenadas, la función <strong>arrange()</strong> nos permite cumplir con esta tarea. El resultado de esta función ordena los valores en forma ascendente, pero es posible también ordenarlos de forma descendente incluyendo la función <strong>desc()</strong>:</p>
<p>Ordenando variables numéricas:<br />
<strong>arrange(sleep_total)</strong> Ordena los tiempo en forma ascendente:</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise(avg_sleep = mean(sleep_total)) %&gt;% 
  arrange(avg_sleep)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">avg_sleep</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">herbi</td>
<td align="right">9.509375</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">10.185714</td>
</tr>
<tr class="odd">
<td align="left">carni</td>
<td align="right">10.378947</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">10.925000</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">14.940000</td>
</tr>
</tbody>
</table>
<p>El resultado opuesto puede ser obtenido mediante:</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(vore) %&gt;% 
  summarise(avg_sleep = mean(sleep_total)) %&gt;% 
  arrange(avg_sleep)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">avg_sleep</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">herbi</td>
<td align="right">9.509375</td>
</tr>
<tr class="even">
<td align="left">NA</td>
<td align="right">10.185714</td>
</tr>
<tr class="odd">
<td align="left">carni</td>
<td align="right">10.378947</td>
</tr>
<tr class="even">
<td align="left">omni</td>
<td align="right">10.925000</td>
</tr>
<tr class="odd">
<td align="left">insecti</td>
<td align="right">14.940000</td>
</tr>
</tbody>
</table>
<p>Si los datos están siendo analizados en función de los niveles de alguna variable específica, es posible ordenarlos agregando el argumento <strong>.by_group = TRUE</strong> a la función <strong>arrange()</strong>:</p>
<pre class="r"><code>msleep %&gt;% 
  select(vore, sleep_total) %&gt;% 
  group_by(vore) %&gt;% 
  arrange(desc(sleep_total), .by_group = TRUE)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">sleep_total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">carni</td>
<td align="right">19.4</td>
</tr>
<tr class="even">
<td align="left">carni</td>
<td align="right">17.4</td>
</tr>
<tr class="odd">
<td align="left">carni</td>
<td align="right">15.8</td>
</tr>
<tr class="even">
<td align="left">carni</td>
<td align="right">14.5</td>
</tr>
<tr class="odd">
<td align="left">carni</td>
<td align="right">13.5</td>
</tr>
<tr class="even">
<td align="left">carni</td>
<td align="right">12.5</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="left">vore</th>
<th align="right">sleep_total</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">herbi</td>
<td align="right">16.6</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">15.9</td>
</tr>
<tr class="odd">
<td align="left">herbi</td>
<td align="right">15.8</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">14.9</td>
</tr>
<tr class="odd">
<td align="left">herbi</td>
<td align="right">14.6</td>
</tr>
<tr class="even">
<td align="left">herbi</td>
<td align="right">14.4</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Trabajando con partes de nuestro data.frame</strong></li>
</ul>
<p>En algunos casos nuestro objetivo es trabajar con partes de nuestros datos, algunas de las funciones que nos ayudaran con esta tarea:</p>
</div>
<div id="los-n-valores-mas-altos-y-bajos" class="section level3">
<h3>Los <strong>n</strong> valores más altos y bajos:</h3>
<p>Si deseas conocer los <strong>5</strong> valores más altos del promedio de la variable <strong>sleep_total</strong></p>
<pre class="r"><code>msleep %&gt;% 
  group_by(order) %&gt;% 
  summarise(average = mean(sleep_total)) %&gt;% 
  top_n(5) %&gt;% 
  arrange(desc(average))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">order</th>
<th align="right">average</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Chiroptera</td>
<td align="right">19.80</td>
</tr>
<tr class="even">
<td align="left">Didelphimorphia</td>
<td align="right">18.70</td>
</tr>
<tr class="odd">
<td align="left">Cingulata</td>
<td align="right">17.75</td>
</tr>
<tr class="even">
<td align="left">Afrosoricida</td>
<td align="right">15.60</td>
</tr>
<tr class="odd">
<td align="left">Pilosa</td>
<td align="right">14.40</td>
</tr>
</tbody>
</table>
<p>Los <code>5</code> valores más bajos pueden ser recuperados con la ayuda de: <code>top_n(-5)</code>:</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(order) %&gt;% 
  summarise(average = mean(sleep_total)) %&gt;% 
  top_n(-5) %&gt;% 
  arrange(desc(average))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">order</th>
<th align="right">average</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Hyracoidea</td>
<td align="right">5.666667</td>
</tr>
<tr class="even">
<td align="left">Artiodactyla</td>
<td align="right">4.516667</td>
</tr>
<tr class="odd">
<td align="left">Cetacea</td>
<td align="right">4.500000</td>
</tr>
<tr class="even">
<td align="left">Proboscidea</td>
<td align="right">3.600000</td>
</tr>
<tr class="odd">
<td align="left">Perissodactyla</td>
<td align="right">3.466667</td>
</tr>
</tbody>
</table>
<p>Si tienes más de una columna, es posible agregar como argumento el nombre de la variable de la cual se quiere recuperar la información:</p>
<pre class="r"><code>msleep %&gt;% 
  group_by(order) %&gt;% 
  summarise(average_sleep = mean(sleep_total),
            max_sleep = max(sleep_total)) %&gt;% 
  top_n(5, average_sleep)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">order</th>
<th align="right">average_sleep</th>
<th align="right">max_sleep</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Afrosoricida</td>
<td align="right">15.60</td>
<td align="right">15.6</td>
</tr>
<tr class="even">
<td align="left">Chiroptera</td>
<td align="right">19.80</td>
<td align="right">19.9</td>
</tr>
<tr class="odd">
<td align="left">Cingulata</td>
<td align="right">17.75</td>
<td align="right">18.1</td>
</tr>
<tr class="even">
<td align="left">Didelphimorphia</td>
<td align="right">18.70</td>
<td align="right">19.4</td>
</tr>
<tr class="odd">
<td align="left">Pilosa</td>
<td align="right">14.40</td>
<td align="right">14.4</td>
</tr>
</tbody>
</table>
</div>
<div id="muestreo-aleatoria-de-filas" class="section level3">
<h3>Muestreo aleatoria de filas:</h3>
<p>Mediante la función <strong>sample_n()</strong> es posible tomar una muestra aleatoria de <strong>n</strong> filas de nuestro data.frame.</p>
<pre class="r"><code>msleep %&gt;% 
  sample_n(6) %&gt;% 
  select_if(is.character)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="left">genus</th>
<th align="left">vore</th>
<th align="left">order</th>
<th align="left">conservation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Vole</td>
<td align="left">Microtus</td>
<td align="left">herbi</td>
<td align="left">Rodentia</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Grivet</td>
<td align="left">Cercopithecus</td>
<td align="left">omni</td>
<td align="left">Primates</td>
<td align="left">lc</td>
</tr>
<tr class="odd">
<td align="left">Common porpoise</td>
<td align="left">Phocoena</td>
<td align="left">carni</td>
<td align="left">Cetacea</td>
<td align="left">vu</td>
</tr>
<tr class="even">
<td align="left">Northern grasshopper mouse</td>
<td align="left">Onychomys</td>
<td align="left">carni</td>
<td align="left">Rodentia</td>
<td align="left">lc</td>
</tr>
<tr class="odd">
<td align="left">Arctic fox</td>
<td align="left">Vulpes</td>
<td align="left">carni</td>
<td align="left">Carnivora</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">Macaque</td>
<td align="left">Macaca</td>
<td align="left">omni</td>
<td align="left">Primates</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>Una variante de esta función nos permite recuperar una fracción de las filas del data.frame, <strong>sample_frac()</strong>. El siguiente ejemplo recupera el <strong>10%</strong> de las filas de nuestra base de datos.</p>
<pre class="r"><code>msleep %&gt;% 
  sample_frac(.1) %&gt;% 
  select_if(is.numeric)</code></pre>
<table>
<thead>
<tr class="header">
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="right">13.8</td>
<td align="right">3.4</td>
<td align="right">0.2166667</td>
<td align="right">10.2</td>
<td align="right">0.00400</td>
<td align="right">0.101</td>
</tr>
<tr class="even">
<td align="right">14.3</td>
<td align="right">3.1</td>
<td align="right">0.2000000</td>
<td align="right">9.7</td>
<td align="right">0.00100</td>
<td align="right">0.120</td>
</tr>
<tr class="odd">
<td align="right">19.9</td>
<td align="right">2.0</td>
<td align="right">0.2000000</td>
<td align="right">4.1</td>
<td align="right">0.00025</td>
<td align="right">0.010</td>
</tr>
<tr class="even">
<td align="right">14.9</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">9.1</td>
<td align="right">NA</td>
<td align="right">0.071</td>
</tr>
<tr class="odd">
<td align="right">15.9</td>
<td align="right">3.0</td>
<td align="right">NA</td>
<td align="right">8.1</td>
<td align="right">NA</td>
<td align="right">0.205</td>
</tr>
<tr class="even">
<td align="right">18.1</td>
<td align="right">6.1</td>
<td align="right">NA</td>
<td align="right">5.9</td>
<td align="right">0.08100</td>
<td align="right">60.000</td>
</tr>
<tr class="odd">
<td align="right">9.1</td>
<td align="right">1.4</td>
<td align="right">0.1500000</td>
<td align="right">14.9</td>
<td align="right">0.00014</td>
<td align="right">0.005</td>
</tr>
<tr class="even">
<td align="right">14.2</td>
<td align="right">1.9</td>
<td align="right">NA</td>
<td align="right">9.8</td>
<td align="right">NA</td>
<td align="right">0.053</td>
</tr>
</tbody>
</table>
</div>
<div id="filas-especificas" class="section level3">
<h3>Filas específicas:</h3>
<p>Las funciones <strong>head()</strong> y <strong>tail()</strong> permiten recuperar las <strong>6</strong> primeras y últimas filas del data.frame, respectivamente. Esto puede ser modificado usando como argumento <strong>n = x</strong> en ambas funciones.</p>
<p>Si deseamos examinar filas de la parte media de nuestro dataframe la función <strong>slice()</strong> nos permite recuperar estas filas. El ejemplo muestra cono recuperar las filas <strong>50</strong> a la <strong>55</strong>.</p>
<pre class="r"><code>msleep %&gt;% 
  slice(50:55) %&gt;% 
  select(- c(2:5))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">name</th>
<th align="right">sleep_total</th>
<th align="right">sleep_rem</th>
<th align="right">sleep_cycle</th>
<th align="right">awake</th>
<th align="right">brainwt</th>
<th align="right">bodywt</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Chimpanzee</td>
<td align="right">9.7</td>
<td align="right">1.4</td>
<td align="right">1.4166667</td>
<td align="right">14.3</td>
<td align="right">0.4400</td>
<td align="right">52.200</td>
</tr>
<tr class="even">
<td align="left">Tiger</td>
<td align="right">15.8</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">8.2</td>
<td align="right">NA</td>
<td align="right">162.564</td>
</tr>
<tr class="odd">
<td align="left">Jaguar</td>
<td align="right">10.4</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">13.6</td>
<td align="right">0.1570</td>
<td align="right">100.000</td>
</tr>
<tr class="even">
<td align="left">Lion</td>
<td align="right">13.5</td>
<td align="right">NA</td>
<td align="right">NA</td>
<td align="right">10.5</td>
<td align="right">NA</td>
<td align="right">161.499</td>
</tr>
<tr class="odd">
<td align="left">Baboon</td>
<td align="right">9.4</td>
<td align="right">1.0</td>
<td align="right">0.6666667</td>
<td align="right">14.6</td>
<td align="right">0.1800</td>
<td align="right">25.235</td>
</tr>
<tr class="even">
<td align="left">Desert hedgehog</td>
<td align="right">10.3</td>
<td align="right">2.7</td>
<td align="right">NA</td>
<td align="right">13.7</td>
<td align="right">0.0024</td>
<td align="right">0.550</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="referencias" class="section level2">
<h2>Referencias:</h2>
<ol style="list-style-type: decimal">
<li>Basado en el tutorial de <a href="https://suzan.rbind.io/2018/04/dplyr-tutorial-4/">Suzan Baert</a>: <strong>Data Wrangling Part 4: Summarizing and slicing your data</strong></li>
</ol>
</div>

    </div>

    


<div class="article-tags">
  
  <a class="badge badge-light" href="/tags/r-markdown/">R Markdown</a>
  
  <a class="badge badge-light" href="/tags/data-management/">Data management</a>
  
</div>



    






<div class="media author-card" itemscope itemtype="http://schema.org/Person">
  
  <img class="portrait mr-3" src="/img/paul_efren.JPG" itemprop="image" alt="Avatar">
  
  <div class="media-body">
    <h5 class="card-title" itemprop="name"><a href="/">Paul Efren Santos Andrade</a></h5>
    <h6 class="card-subtitle">Plant ecology and R programming</h6>
    
    <ul class="network-icon" aria-hidden="true">
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="/#contact" >
          <i class="fas fa-envelope"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://twitter.com/PaulEfrenSantos" target="_blank" rel="noopener">
          <i class="fab fa-twitter"></i>
        </a>
      </li>
      
      
      
      
        
      
      
      
      
      
        
      
      <li>
        <a itemprop="sameAs" href="https://github.com/PaulESantos" target="_blank" rel="noopener">
          <i class="fab fa-github"></i>
        </a>
      </li>
      
    </ul>
  </div>
</div>




    
    
    <div class="article-widget">
      <div class="hr-light"></div>
      <h3>Related</h3>
      <ul>
        
        <li><a href="/post/2018-11-20-data_wrangling_3/">Data Wrangling Part 3</a></li>
        
        <li><a href="/post/2018-11-12-data_wrangling_1/">Data Wrangling Part 1</a></li>
        
        <li><a href="/post/2018-11-12-data_wrangling_2/">Data Wrangling Part 2</a></li>
        
        <li><a href="/post/2018-10-05-indice_valor_importancia/">Índice Valor Importancia</a></li>
        
        <li><a href="/post/2018-09-07-intervalos_de_confianza/">Intervalos de Confianza</a></li>
        
      </ul>
    </div>
    

    

    
<section id="comments">
  <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "https-paulefrensa-rbind-io" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</section>



  </div>
</article>

<div class="container">
  <footer class="site-footer">
  
  <p class="powered-by">
    <a href="/privacy/">Privacy Policy</a>
  </p>
  

  <p class="powered-by">
    &copy; 2018 &middot; 

    Powered by the
    <a href="https://sourcethemes.com/academic/" target="_blank" rel="noopener">Academic theme</a> for
    <a href="https://gohugo.io" target="_blank" rel="noopener">Hugo</a>.

    
    <span class="float-right" aria-hidden="true">
      <a href="#" id="back_to_top">
        <span class="button_icon">
          <i class="fas fa-chevron-up fa-2x"></i>
        </span>
      </a>
    </span>
    
  </p>
</footer>

</div>


<div id="modal" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Cite</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <pre><code class="tex hljs"></code></pre>
      </div>
      <div class="modal-footer">
        <a class="btn btn-outline-primary my-1 js-copy-cite" href="#" target="_blank">
          <i class="fas fa-copy"></i> Copy
        </a>
        <a class="btn btn-outline-primary my-1 js-download-cite" href="#" target="_blank">
          <i class="fas fa-download"></i> Download
        </a>
        <div id="modal-error"></div>
      </div>
    </div>
  </div>
</div>

    

    
    

    
    
    
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha512-+NqPlbbtM1QqiK8ZAo4Yrj2c4lNQoGv8P79DPtKzj++l5jnN39rHA/xsqn8zE9l0uSoxaCdrOgFs6yjyfbBxSg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.imagesloaded/4.1.3/imagesloaded.pkgd.min.js" integrity="sha512-umsR78NN0D23AzgoZ11K7raBD+R6hqKojyBZs1w8WvYlsI+QuKRGBx3LFCwhatzBunCjDuJpDHwxD13sLMbpRA==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha256-VsEqElsCHSGmnmHXGQzvoWjWwoznFSZc6hs7ARLRacQ=" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery.isotope/3.0.4/isotope.pkgd.min.js" integrity="sha512-VDBOIlDbuC4VWxGJNmuFRQ0Li0SKkDpmGyuhAG5LTDLd/dJ/S0WMVxriR2Y+CyPL5gzjpN4f/6iqWVBJlht0tQ==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.2.5/jquery.fancybox.min.js" integrity="sha256-X5PoE3KU5l+JcX+w09p/wHl9AzK333C4hJ2I9S5mD4M=" crossorigin="anonymous"></script>

      
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>
        
      

      
      
    

    
    

    
    
    
    <script id="dsq-count-scr" src="//https-paulefrensa-rbind-io.disqus.com/count.js" async></script>
    

    
    
    <script>hljs.initHighlightingOnLoad();</script>
    

    
    
    <script>
      const search_index_filename = "/index.json";
      const i18n = {
        'placeholder': "Search...",
        'results': "results found",
        'no_results': "No results found"
      };
      const content_type = {
        'post': "Posts",
        'project': "Projects",
        'publication' : "Publications",
        'talk' : "Talks"
        };
    </script>
    

    
    

    
    
    <script id="search-hit-fuse-template" type="text/x-template">
      <div class="search-hit" id="summary-{{key}}">
      <div class="search-hit-content">
        <div class="search-hit-name">
          <a href="{{relpermalink}}">{{title}}</a>
          <div class="article-metadata search-hit-type">{{type}}</div>
          <p class="search-hit-description">{{snippet}}</p>
        </div>
      </div>
      </div>
    </script>
    

    
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.1/fuse.min.js" integrity="sha256-VzgmKYmhsGNNN4Ph1kMW+BjoYJM2jV5i4IlFoeZA9XI=" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.min.js" integrity="sha256-4HLtjeVgH0eIB3aZ9mLYF6E8oU5chNdjU6p6rrXpl9U=" crossorigin="anonymous"></script>
    

    
    

    
    
    
    
    
    
    
    
    <script src="/js/academic.min.d037ee5294b166a79dec317c58aea9cc.js"></script>

    

  </body>
</html>

